<form (ngSubmit)="upload()" [formGroup]="songUploadForm">
  <div class="form-group">
    <label for="songName">Song Name</label>
    <input class="form-control" formControlName="name" id="songName" placeholder="Enter song name" type="text">
    <div *ngIf="songUploadForm.get('name').hasError('required') && songUploadForm.get('name').touched"
         class="alert alert-danger" role="alert">
      Must be filled!
    </div>
  </div>

  <div *ngFor="let artist of artists.controls; let i = index;" class="form-group"
       formArrayName="artists">
    <div [formGroupName]="i">
      <mat-form-field>
        <label for="artistName">{{ 'Artist ' + (i + 1) + ' name' }}
          <input [matAutocomplete]="auto" [placeholder]="'Artist ' + (i + 1) + ' name'" class="form-control"
                 formControlName="name" id="artistName" matInput type="text">
        </label>
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
            {{option.name}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
      <input class="form-control" formControlName="birthDate" placeholder="Birth Date" type="date">
    </div>

  </div>

  <div class="form-group">
    <label for="releaseDate">Release Date</label>
    <input class="form-control" formControlName="releaseDate" id="releaseDate" placeholder="yyyy-mm-dd" type="date">
    <div *ngIf="songUploadForm.get('releaseDate').hasError('required') && songUploadForm.get('releaseDate').touched"
         class="alert alert-danger" role="alert">
      Must be filled!
    </div>
  </div>

  <label for="audio">Audio File</label>
  <div class="form-group custom-file">

    <label *ngIf=!isAudioFileChosen class="custom-file-label">Choose file</label>
    <label *ngIf=isAudioFileChosen class="custom-file-label">{{ audioFileName }}</label>
    <input (change)="selectFile($event)" class="custom-file-input" id="audio" type="file">
  </div>
  <div class="mt-sm-3">
    <button class="btn btn-primary" type="submit">Submit</button>
  </div>
  <span *ngIf="message">{{ message }}</span>
  <div *ngIf="progress > 0" class="progress form-group">
    <div [style.width.%]="progress" class="progress-bar progress-bar-striped bg-success" role="progressbar">
    </div>
  </div>
</form>

<pre>{{songUploadForm.value | json}}</pre>
